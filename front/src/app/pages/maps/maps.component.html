<div class="header bg-gradient-skyblue p-5 pb-7 pt-7 ">
  <h1>City</h1>
  <div class="container-fluid">
    <div class="header">



      <div>

      </div>
    </div>
  </div>
</div>

<ng-template #content let-modal>
  <div class="bg-aliceblue modal-div ">

    <div class="modal-header">
      <h4>Service Type</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')"><span
          aria-hidden="true">&times;</span></button>
    </div>

    <div class="modal-body">




      <form [formGroup]="cityForm" name="cityForm">

        <div class="form-field">

          <label for="country"> Select Country : </label>
          <select id="country" (change)="onselect($event.target.value)" formControlName="country">
            <option value="" selected disabled>Select Country</option>
            <option *ngFor="let country of countriesArray" [value]="country._id">{{ country.name}}</option>
          </select>

          <div class="error"
            *ngIf="cityForm.get('country').invalid && cityForm.get('country').touched  && cityForm.get('country').value==''">
            *Please
            select country</div>
        </div>
        <div class="form-field">
          <label for="city"> City: </label>
          <input type="text" name="city" formControlName="city" id="city" #city placeholder="Enter City Name" >

          <!-- <div class="errors text-center" *ngIf="cityForm.controls['city']?.invalid && cityForm.controls['city'].touched">*Please enter a value</div> -->
          <div class="error" *ngIf="cityForm.get('city').invalid && cityForm.get('city').touched">*Please
            enter a value</div>
        </div>
        <div class="error" *ngIf="errorMsg">{{errorMsg}}</div>
        <div class="form-field mapp">

          <div class="map-div mt-5">
            <div *ngIf="!polyerr">*please draw polygon</div>

            <div id="map">

            </div>
          </div>
        </div>

        <div class="form-field">

          <button *ngIf="activateAddZone" name="myButton" id="myButton" class="btn btn-success mt-5"
            (click)="addZone()">ADD Zone</button>
          <div *ngIf="activateUpdate">
            <button class="btn btn-primary" (click)="modal.close('Close click');onSave();CityForm.reset();">Save</button>
            <button class="btn btn-danger" (click)="modal.close('Close click');onCancel();CityForm.reset()">Cancel</button>

          </div>
        </div>

      </form>



    </div>
    <!--
    <div class="modal-footer">
      <button type="button" class="btn btn-info" (click)="updateService(vehicle.value)">Save Updates</button>
      <button type="button" class="btn btn-danger" (click)="modal.close('Close click')">Delete Service</button>
    </div> -->
  </div>

</ng-template>

<div class="container-fluid mt--5">
  <!-- Table -->
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0 row mr-0 ml-0">

          <div class="col-sm-4">

            <div class="form-control-search d-flex  align-items-center">
              <input type="search" class="form-control" placeholder="Search" #search>
              <div class="btn-group">
                <button class="btn" (click)="onSearch(search.value)">
                  <i class="search-icon fas fa-search"></i>
                </button>
                <button class="btn refresh" (click)="getZones(1);search.value = ''">‚ü≥</button>
              </div>
            </div>

          </div>




          <div class="col-sm-8 text-right">

            <button class="btn btn-outline-primary add-dialog" (click)="openModel(content)"> + Add </button>
          </div>

        </div>
        <div class="table-responsive">
          <table class="table align-items-center text-center table-flush" id="example">
            <thead class="thead-light">
              <tr>
                <th scope="col">COUNTRY</th>
                <th scope="col">CITY</th>
                <th scope="col">ACTION</th>

              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let zone of allzones">
                <td class="nametd">
                  {{zone.country.name}} </td>
                <td class="nametd">{{zone.city}}</td>

                <td id="b'+ user._id + '">
                  <!-- <button class="update-button btn btn-outline-primary" (click)="updateCity(user._id);scrollToTop()">
                      UPDATE</button> -->
                  <!-- <button class="delete-button btn btn-outline-danger" (click)="onDelete(user._id)"> DELETE</button> -->
                  <lord-icon (click)="openModel(content);updateCity(zone._id);scrollToTop()"
                    src="https://cdn.lordicon.com/bxxnzvfm.json" trigger="hover"
                    colors="primary:#3a3347,secondary:#ffc738,tertiary:#f9c9c0,quaternary:#ebe6ef"
                    style="width:50px;height:50px">
                  </lord-icon>
                  <!-- <lord-icon (click)="onDelete(user._id)"
                        src="https://cdn.lordicon.com/exkbusmy.json"
                        trigger="hover"
                        colors="outline:#121331,primary:#646e78,secondary:#b4b4b4,tertiary:#ebe6ef"
                        style="width:50px;height:50px">
                    </lord-icon> -->
                </td>


              </tr>
              <tr *ngIf="allzones?.length <= 0 ">
                <td class="p-5" colspan="3">

                  <strong> City Not Found</strong>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card-footer py-4">
          <nav aria-label="...">
            <ul class="pagination justify-content-end mb-0">

              <li class="page-item disabled" *ngIf="currentPage!==1" (click)="onPrevious()">
                <a class="page-link">
                  <i class="fas fa-angle-left"></i>
                  <span class="sr-only">Previous</span>
                </a>
              </li>
              <li class="page-item" [ngClass]="{'active' : currentPage == i+1}" [hidden]="currentPage <i || currentPage-1 > i+1"
                *ngFor="let item of NoOfPages; let i = index"> <a class="page-link" (click)="onPage(i+1)">{{i+1}}</a>
              </li>

              <li class="page-item"  [ngClass]="{'vh':currentPage==NoOfPages.length }"  (click)="onNext()">
                <a class="page-link">
                  <i class="fas fa-angle-right"></i>
                  <span class="sr-only" >Next</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
  <!-- Dark table -->

</div>
